(this.webpackJsonpcfcommerce=this.webpackJsonpcfcommerce||[]).push([[0],{35:function(e,t,a){e.exports=a(68)},40:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"loadData",(function(){return Q})),a.d(r,"setPageSize",(function(){return U})),a.d(r,"setSortProperty",(function(){return Y})),a.d(r,"placeOrder",(function(){return B}));var n={};a.r(n),a.d(n,"addToCart",(function(){return oe})),a.d(n,"updateCartQuantity",(function(){return se})),a.d(n,"removeFromCart",(function(){return le})),a.d(n,"clearCart",(function(){return ie}));var c,o,s=a(0),l=a.n(s),i=a(30),u=a.n(i),p=(a(40),a(2)),m=a(3),d=a(4),h=a(5),b=a(15),f=a(10),y=a(6),v="products",g="categories",E="orders",O="data_load",j="data_store",C="data_set_sort",k="data_set_pagesize",N="cart_add",P="cart_update",S="cart_delete",x="cart_clear",w=a(12),T=Object(b.c)(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e,a){for(var r=0;r<t.length;r++){var n=t[r](e,a);if(n!==e)return n}return e}}((function(e,t){var a;switch(t.type){case O:return Object(y.a)({},e,(a={},Object(f.a)(a,t.payload.dataType,t.payload.data),Object(f.a)(a,"".concat(t.payload.dataType,"_total"),t.payload.total),Object(f.a)(a,"".concat(t.payload.dataType,"_params"),t.payload.params),a));case k:return Object(y.a)({},e,{pageSize:t.payload});case C:return Object(y.a)({},e,{sortKey:t.payload});case j:if(t.payload.dataType===E)return Object(y.a)({},e,{order:t.payload.data});break;default:return e||{}}}),(function(e,t){var a=Object(y.a)({cart:[],cartItems:0,cartPrice:0},e);switch(t.type){case N:var r=t.payload.product,n=t.payload.quantity,c=a.cart.find((function(e){return e.product.id===r.id}));return c?c.quantity+=n:a.cart=[].concat(Object(w.a)(a.cart),[t.payload]),a.cartItems+=n,a.cartPrice+=r.price*n,a;case P:return a.cart=a.cart.map((function(e){if(e.product.id===t.payload.product.id){var r=t.payload.quantity-e.quantity;return a.cartItems+=r,a.cartPrice+=e.product.price*r,t.payload}return e})),a;case S:var o=a.cart.find((function(e){return e.product.id===t.payload.id}));return a.cartItems-=o.quantity,a.cartPrice-=o.quantity*o.product.price,a.cart=a.cart.filter((function(e){return e!==o})),a;case x:return Object(y.a)({},e,{cart:[],cartItems:0,cartPrice:0});default:return e||{}}})),Object(b.a)((function(){return function(e){return function(t){var a;"object"!==typeof(a=t.payload)&&"function"!==typeof a||"function"!==typeof a.then?e(t):t.payload.then((function(a){return e(Object(y.a)({},t,{payload:a}))}))}}}))),A=a(14),_=a(73),q=a(75),F=a(70),z=a(72),D=a(23),I=a.n(D),M=a(32),R=a(33),L=a.n(R),K=(c={},Object(f.a)(c,v,"".concat("http","://").concat("localhost",":").concat(3500,"/api/products")),Object(f.a)(c,g,"".concat("http","://").concat("localhost",":").concat(3500,"/api/categories")),Object(f.a)(c,E,"".concat("http","://").concat("localhost",":").concat(3500,"/api/orders")),c),$=new function e(t){var a=this;Object(p.a)(this,e),this.GetData=function(){var e=Object(M.a)(I.a.mark((function e(t,r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.SendRequest("get",K[t],r));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.StoreData=function(e,t){return a.SendRequest("post",K[e],{},t)},this.SendRequest=function(e,t,a,r){return L.a.request({method:e,url:t,params:a,data:r})},this.error_hanlder=t||function(){}},Q=function(e,t){return{type:O,payload:$.GetData(e,t).then((function(a){return{dataType:e,data:a.data,total:Number(a.headers["x-total-count"]),params:t}}))}},U=function(e){return{type:k,payload:e}},Y=function(e){return{type:C,payload:e}},B=function(e){return{type:j,payload:$.StoreData(E,e).then((function(e){return{dataType:E,data:e.data}}))}},W=a(71),G=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(F.a,{path:this.props.to,exact:this.props.exact,children:function(t){var a=e.props.className||"m-2 btn btn-block",r=e.props.activeClass||"btn-primary",n=e.props.inActiveClass||"btn-secondary",c="".concat(a," ").concat(t.match?r:n);return l.a.createElement(W.a,{to:e.props.to,className:c},e.props.children)}})}}]),a}(s.Component),J=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{to:"".concat(this.props.baseUrl,"/all"),exact:!1},"All"),this.props.categories&&this.props.categories.map((function(t){return l.a.createElement(G,{key:t,to:"".concat(e.props.baseUrl,"/").concat(t.toLowerCase())},t)})))}}]),a}(s.Component),V=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return null==this.props.products||0===this.props.products.length?l.a.createElement("h5",{className:"p-2"},"No Products"):this.props.products.map((function(t){return l.a.createElement("div",{className:"card m-1 p-1 bg-light",key:t.id},l.a.createElement("h4",null,t.name,l.a.createElement("span",{className:"badge badge-pill badge-primary float-right"},"$",t.price.toFixed(2))),l.a.createElement("div",{className:"card-text bg-white p-1"},t.description,l.a.createElement("button",{className:"btn btn-success btn-sm float-right",onClick:function(){return e.props.addToCart(t)}},"Add To Cart")))}))}}]),a}(s.Component),Z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).getSummary=function(){return e.props.cartItems>0?l.a.createElement("span",null,e.props.cartItems," item(s), $",e.props.cartPrice.toFixed(2)):l.a.createElement("span",null,"Your cart: (empty) ")},e.getLinkClasses=function(){return"btn btn-sm bg-dark text-white\n            ".concat(0===e.props.cartItems?"disabled":"")},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"float-right"},l.a.createElement("small",null,this.getSummary(),l.a.createElement(W.a,{className:this.getLinkClasses(),to:"/shop/cart"},l.a.createElement("i",{className:"fa fa-shopping-cart"}))))}}]),a}(s.Component),H=a(74),X=function(e){return e},ee={setPageSize:U,setSortProperty:Y},te=function(e,t,a){return Object(y.a)({},e,{},a,{},t,{currentPage:Number(a.match.params.page),pageCount:Math.ceil((e.products_total|e.pageSize||5)/(e.pageSize||5)),navigateToPage:function(e){return a.history.push("/shop/products/".concat(a.match.params.category,"/").concat(e))}})},ae=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).getPageNumbers=function(){return e.props.pageCount<4?Object(w.a)(Array(e.props.pageCount+1).keys()).slice(1):e.props.currentPage<=4?[1,2,3,4,5]:e.props.currentPage>e.props.pageCount-4?Object(w.a)(Array(5).keys()).reverse().map((function(t){return e.props.pageCount-t})):[e.props.currentPage-1,e.props.currentPage,e.props.currentPage+1]},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.currentPage,t=this.props.pageCount,a=this.props.navigate;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){return a(e-1)},disabled:1===e,className:"btn btn-secondary mx-1"},"Previous"),e>4&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-secondary mx-1",onClick:function(){return a(1)}},"1"),l.a.createElement("span",{className:"h4"},"...")),this.getPageNumbers().map((function(t){return l.a.createElement("button",{className:"btn mx-1 ".concat(t===e?"btn-primary":"btn-secondary"),onClick:function(){return a(t)},key:t},t)})),e<=t-4&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"h4"},"..."),l.a.createElement("button",{className:"btn btn-secondary mx-1",onClick:function(){return a(t)}},t)),l.a.createElement("button",{onClick:function(){return a(e+1)},disabled:e===t,className:"btn btn-secondary mx-1"},"Next"))}}]),a}(s.Component),re=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handlePageSizeChange=function(e){r.props.setPageSize(e.target.value)},r.handleSortPropertyChange=function(e){r.props.setSortProperty(e.target.value)},r.pageSizes=r.props.sizes||[5,10,25,100],r.sortKeys=r.props.keys||["Name","Price"],r}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"m-2"},l.a.createElement("div",{className:"text-center m-1"},l.a.createElement(ae,{currentPage:this.props.currentPage,pageCount:this.props.pageCount,navigate:this.props.navigateToPage})),l.a.createElement("div",{className:"form-inline justify-content-center"},l.a.createElement("select",{className:"form-control",onChange:this.handlePageSizeChange,value:this.props.pageSize||this.pageSizes[0]},this.pageSizes.map((function(e){return l.a.createElement("option",{value:e,key:e},e," per page")}))),l.a.createElement("select",{className:"form-control",onChange:this.handleSortPropertyChange,value:this.props.sortKey||this.sortKeys[0]},this.sortKeys.map((function(e){return l.a.createElement("option",{value:e.toLowerCase(),key:e},"Sort By ",e)})))))}}]),a}(s.Component),ne=(o=re,Object(H.a)(Object(A.b)(X,ee,te)(o))),ce=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleAddToCart=function(){var t;(t=e.props).addToCart.apply(t,arguments),e.props.history.push("/shop/cart")},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col bg-dark text-white"},l.a.createElement("div",{className:"navbar-brand"},"CFCommerce"),l.a.createElement(Z,this.props))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-3 p-2"},l.a.createElement(J,{baseUrl:"/shop/products",categories:this.props.categories})),l.a.createElement("div",{className:"col-9 p-2"},l.a.createElement(ne,null),l.a.createElement(V,{products:this.props.products,addToCart:this.handleAddToCart}))))}}]),a}(s.Component),oe=function(e,t){return{type:N,payload:{product:e,quantity:t||1}}},se=function(e,t){return{type:P,payload:{product:e,quantity:t}}},le=function(e){return{type:S,payload:e}},ie=function(){return{type:x}},ue=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t,a){e.props.updateQuantity(t,a.target.value)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.props.cart&&0!==this.props.cart.length?l.a.createElement(l.a.Fragment,null,this.props.cart.map((function(t){return l.a.createElement("tr",{key:t.product.id},l.a.createElement("td",null,l.a.createElement("input",{type:"number",value:t.quantity,onChange:function(a){return e.handleChange(t.product,a)}})),l.a.createElement("td",null,t.product.name),l.a.createElement("td",null,"$",t.product.price.toFixed(2)),l.a.createElement("td",null,"$",(t.quantity*t.product.price).toFixed(2)),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return e.props.removeFromCart(t.product)}},"Remove")))})),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"3",className:"text-right"},"Total:"),l.a.createElement("th",{colSpan:"2"},"$",this.props.cartPrice.toFixed(2)))):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"5"},"Your cart is empty"))}}]),a}(s.Component),pe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).getLinkClasses=function(){return"btn btn-secondary m-1\n        ".concat(0===e.props.cartItems?"disabled":"")},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"m-3"},l.a.createElement("h2",{className:"text-center"},"Your Cart"),l.a.createElement("table",{className:"table table-bordered table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Quantity"),l.a.createElement("th",null,"Product"),l.a.createElement("th",{className:"text-right"},"Price"),l.a.createElement("th",{className:"text-right"},"Subtotal"),l.a.createElement("th",null))),l.a.createElement("tbody",null,l.a.createElement(ue,{cart:this.props.cart,cartPrice:this.props.cartPrice,updateQuantity:this.props.updateCartQuantity,removeFromCart:this.props.removeFromCart}))),l.a.createElement("div",{className:"text-center"},l.a.createElement(W.a,{className:"btn btn-primary m-1",to:"/shop"},"Continue Shopping"),l.a.createElement(W.a,{className:this.getLinkClasses(),to:"/shop/checkout"},"Checkout")))}}]),a}(s.Component),me=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).componentDidUpate=function(){return e.getData()},e.componentDidMount=function(){return e.getData()},e.getData=function(){var t=e.props.products_params||{},a={_limit:e.props.pageSize||5,_sort:e.props.sortKey||"name",_page:e.props.match.params.page||1,category_like:"all"===(e.props.match.params.category||"")?"":e.props.match.params.category};Object.keys(a).find((function(e){return t[e]!==a[e]}))&&e.props.loadData(v,a)},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.children)}}]),a}(s.Component),de=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return this.props.errors?this.props.errors.map((function(e){return l.a.createElement("h6",{className:"text-danger",key:e},e)})):null}}]),a}(s.Component),he=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){r.setState((function(e){var t=Object(y.a)({},e,{validationErrors:{}});return Object.values(r.formElements).forEach((function(e){e.checkValidity()||(t.validationErrors[e.name]=function(e){var t=[];return e.validity.valueMissing&&t.push("Value required"),e.validity.typeMismatch&&t.push("Invalid ".concat(e.type)),t}(e))})),t}),(function(){if(0===Object.keys(r.state.validationErrors).length){var e=Object.assign.apply(Object,Object(w.a)(Object.entries(r.formElements).map((function(e){return Object(f.a)({},e[0],e[1].value)}))));r.props.submitCallback(e)}}))},r.registerRef=function(e){null!==e&&(r.formElements[e.name]=e)},r.renderElement=function(e){var t=e.name||e.label.toLowerCase();return l.a.createElement("div",{className:"form-group",key:e.label},l.a.createElement("label",null,e.label),l.a.createElement(de,{errors:r.state.validationErrors[t]}),l.a.createElement("input",Object.assign({className:"form-control",name:t,ref:r.registerRef},r.props.defaultAttrs,e.attrs)))},r.state={validationErrors:{}},r.formElements={},r}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,this.props.formModel.map((function(t){return e.renderElement(t)})),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{className:"btn btn-secondary m-1",onClick:this.props.cancelCallback},this.props.cancelText||"Cancel"),l.a.createElement("button",{className:"btn btn-primary m-1",onClick:this.handleSubmit},this.props.submitText||"Submit")))}}]),a}(s.Component),be=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleSubmit=function(e){var t=Object(y.a)({},e,{products:r.props.cart.map((function(e){return{quanity:e.quanity,product_id:e.product.id}}))});r.props.placeOrder(t),r.props.clearCart(),r.props.history.push("/shop/thanks")},r.handleCancel=function(){r.props.history.push("/shop/cart")},r.defaultAttrs={type:"text",required:!0},r.formModel=[{label:"Name"},{label:"Email",attrs:{type:"email"}},{label:"Address"},{label:"City"},{label:"Zip/Postal Code",name:"zip"},{label:"Country"}],r}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col bg-dark text-white"},l.a.createElement("div",{className:"navbar-brand"},"CFCommerce"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m-2"},l.a.createElement(he,{fromModel:this.formModel,defaultAttrs:this.defaultAttrs,submitCallback:this.handleSubmit,cancelCallback:this.handleCancel,submitText:"Place Order",cancelText:"Return to Cart"}))))}}]),a}(s.Component),fe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"col bg-dark text-white"},l.a.createElement("div",{className:"navbar-brand"},"CFCommerce")),l.a.createElement("div",{className:"m-2 text-center"},l.a.createElement("h2",null,"Thanks!"),l.a.createElement("p",null,"Thanks for placing you order."),l.a.createElement("p",null,"Your order is #",this.props.order?this.props.order.id:0),l.a.createElement("p",null,"We'll ship your order as soon as possible."),l.a.createElement(W.a,{to:"/shop",className:"btn btn-primary"},"Return to Store")))}}]),a}(s.Component),ye=Object(y.a)({},r,{},n),ve=Object(A.b)((function(e){return e}),ye)(function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).selectComponent=function(t){var a=function a(r,n){return l.a.createElement(r,Object.assign({},e.props,t),n&&a(n))};switch(t.match.params.section){case"products":return a(me,ce);case"cart":return a(pe);case"checkout":return a(be);case"thanks":return a(fe);default:return l.a.createElement(z.a,{to:"/shop/products/all/1"})}},e.componentDidMount=function(){return e.props.loadData(g)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(q.a,null,l.a.createElement(z.a,{from:"/shop/products/:category",to:"/shop/products/:category/1",exact:!0}),l.a.createElement(F.a,{path:"/shop/:section?/:category?/:page?",render:function(t){return e.selectComponent(t)}}))}}]),a}(s.Component)),ge=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(A.a,{store:T},l.a.createElement(_.a,null,l.a.createElement(q.a,null,l.a.createElement(F.a,{path:"/shop",component:ve}),l.a.createElement(z.a,{to:"/shop"}))))}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(66),a(67);u.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.b93d2619.chunk.js.map